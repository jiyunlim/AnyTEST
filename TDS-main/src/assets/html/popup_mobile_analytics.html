<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,viewport-fit=cover" />
  <title>[TDS Layer] T 월드 다이렉트</title>
  <link rel="stylesheet" href="../css/import_style.css" />
  <script src="../js/jquery-1.12.4.js"></script>
  <script src="../js/swiper/swiper.min.js"></script>
  <!-- [D] 추가 chart.js -->
  <script src="../js/chart/chart.min.js"></script>
</head>
<!-- 웹 접근성 작업 시작 2022.09.21 -->

<body>
  <!-- [D] 공통 팝업 영역
      팝업 레이어 일 경우 class = " tds-popup-wrap " 추가
    -->
  <div class="container-wrap tds-popup-wrap mobile-analytics-wrap ">
    <!-- 헤더 영역 -->
    <div class="tds-header">
      <div class="top-header">
        <div class="top-header-left">
          <h1 class="title">구매현황 보기</h1>
        </div>
        <div class="top-header-right">
          <!-- 웹접근성 작업으로 위치 수정 -->
        </div>
      </div>
    </div>

    <!-- 본분 영역 수정 2022.08-->
    <div class="tds-main">
      <div class="l-grid">

        <!-- *구매자 선택 타입 팝업 -->
        <div class="main-section mobile-analytics">
          <h3 class="section-tit">구매자들이 많이 선택한 타입을 알려드려요.</h3>
          <div class="section-cnt">
            <article>
              <div class="device-area">
                <div class="thumb">
                  <img src="../img/product@2x.png" alt="갤럭시노트20"/>
                </div>
                <div class="service-cnt">
                  <div class="service-name">갤럭시노트20</div>

                  <!-- [D] 2023.01.19 용량 , 색상 구조 변경  -->
                  <ul class="device-size-area">
                    <li class="device-size">64G</li>
                    <li class="device-size">128G</li>
                    <li class="device-size">256G</li>
                    <li class="device-size">512G</li>
                    <li class="device-size">1TB</li>
                  </ul>

                  <ul class="device-color-area">
                    <li class="device-color">
                      <div style="background-color: #364936;"></div>
                      <!-- [D] 2023.01.19 span 'blinc'클래스명 삭제  -->
                      <span>그린</span>
                    </li>
                    <li class="device-color">
                      <div style="background-color: #faddd7;"></div>
                      <span>핑크</span>
                    </li>
                    <li class="device-color">
                      <div style="background-color:#276888;"></div>
                      <span>블루</span>
                    </li>
                    <li class="device-color">
                      <div style="background-color:#232a32;"></div>
                      <span>미드나이트</span>
                    </li>
                    <li class="device-color">
                      <div style="background-color: #ffffff;"></div>
                      <span>스타라이트</span>
                    </li>
                    <li class="device-color">
                      <div style="background-color:#bf0013;"></div>
                      <span>(Product)RED</span>
                    </li>
                  </ul>
                </div>
              </div>
            </article>

            <article>
              <div class="article-top">
                <ul class="select-trend-wrap">
                  <li>
                    <label for="age">
                      <span class="title">연령</span>
                    </label>
                    <div class="input-select">
                      <select name="age-trend"  id="age">
                        <option value="all">전체</option>
                        <option value="10">10대</option>
                        <option value="20">20대</option>
                        <option value="30">30대</option>
                        <option value="40">40대</option>
                        <option value="50">50대</option>
                        <option value="60이상">60대 이상</option>
                      </select>
                    </div>
                  </li>
                  <li>
                    <label for="gender">
                      <span class="title">성별</span>
                    </label>
                    <div class="input-select">
                      <select name="gender-trend" id="gender">
                        <option value="all">전체</option>
                        <option value="male">남</option>
                        <option value="female">여</option>
                      </select>
                    </div>
                  </li>
                </ul>
              </div>
              <h4 class="article-tit">많이 선택한 색상이에요.</h4>
              <!-- [D] 2022.08.04 case 1 : 단일 색상 용량 시-->
              <div class="article-subtit">앗! 해당 휴대폰은 단일 색상만 판매 중입니다.</div>
              <div class="article-cnt">
                <div class="chart-bar-horizontal-single">

                  <div class="donut-chart-wrap">
                    <canvas id="color-chart" title="많이 선택한 색상 그래프" style="width: 144px; height:144px; "></canvas>

                    <div class="info-message bar-ranking">
                    <dl>
                      <dt><span style="background-color: #000000;"></span>블랙</dt>
                      <dd>50%</dd>
                    </dl>
                    <dl>
                      <dt><span style="background-color: #d8d8d8;"></span>그레이</dt>
                      <dd>21%</dd>
                    </dl>
                    <dl>
                      <dt><span style="background-color: #ffffff;"></span>화이트</dt>
                      <dd>15%</dd>
                    </dl>
                    <dl>
                      <dt><span style="background-color: #ff5d5d;"></span>레드</dt>
                      <dd>8%</dd>
                    </dl>
                    <dl>
                      <dt><span style="background-color: #ffde01;"></span>옐로</dt>
                      <dd>5%</dd>
                    </dl>
                    <dl>
                      <dt><span style="background-color: #3b4bff;"></span>블루</dt>
                      <dd>1%</dd>
                    </dl>
                  </div>
                  </div>
                  
                </div>
              </div>
            </article>
            <hr aria-hidden="true"/>

            <article>
              <h4 class="article-tit">많이 선택한 용량이에요.</h4>
              <!-- [D] 2022.08.04 case 1 : 단일 색상 용량 시-->
              <div class="article-subtit">앗! 해당 휴대폰은 단일 용량만 판매 중입니다.</div>
              <div class="article-cnt">
                <!-- [D] 10% 미만 넓이 고정 -->
                <div class="chart-bar-horizontal-single">
                  <div class="bar-area">
                    <div class="bar" style="width:70%;">
                      <div class="select-area">
                      <dl>
                        <dt>256G</dt>
                        <dd>70%</dd>
                      </dl>
                    </div>
                    </div>
                  </div>
                  <div class="info-message">
                    <dl>
                      <dt>출고가</dt>
                      <dd>1,606,000원</dd>
                    </dl>
                  </div>
                </div>
                <div class="chart-bar-horizontal-single">
                  <div class="bar-area">
                    <div class="bar" style="width:19%;">
                      <div class="select-area">
                        <dl>
                          <dt>512G</dt>
                          <dd>19%</dd>
                        </dl>
                      </div>
                    </div>
                  </div>
                  <div class="info-message">
                    <dl>
                      <dt>출고가</dt>
                      <dd>1,870,000원</dd>
                    </dl>
                  </div>
                </div>
                <div class="chart-bar-horizontal-single">
                  <div class="bar-area">
                    <div class="bar" style="width:10%;">
                      <div class="select-area">
                        <dl>
                          <dt>128G</dt>
                          <dd>10%</dd>
                        </dl>
                      </div>
                    </div>
                  </div>
                  <div class="info-message">
                    <dl>
                      <dt>출고가</dt>
                      <dd>1,230,000원</dd>
                    </dl>
                  </div>
                </div>
              </div>
            </article>

            <!-- {/* 다른 고객들이 함께 많이 본 휴대폰 */} -->
            <div class="main-section recently-viewed-other">
              <h3 class="section-tit">다른 고객들이<br>함께 많이 본 휴대폰이에요.</h3>
              <div class="section-cnt">
                <div class="device-list">
                  <ul>
                    <li>
                      <button type="button" class="device-area" aria-label="iPhone11 PRO">
                        <span class="thumb">
                          <img src="../img/img-product-70px-iphone11pro@2x.png" alt="iPhone11 PRO" title="iPhone11 PRO"
                            aria-hidden="true">
                        </span>
                        <span class="service-cnt">
                          <span class="service-name">iPhone11 PRO VIVA 트롯전국체전 edition</span>
                        </span>
                      </button>
                    </li>
                    <li>
                      <button type="button" class="device-area" aria-label="갤럭시 노트 20">
                        <span class="thumb">
                          <img src="../img/img-product-70px-galaxy-note20@2x.png" alt="갤럭시 노트 20" title="갤럭시 노트 20"
                            aria-hidden="true">
                        </span>
                        <span class="service-cnt">
                          <span class="service-name">갤럭시 노트 20</span>
                        </span>
                      </button>
                    </li>
                    <li>
                      <button type="button" class="device-area" aria-label="갤럭시 Z Flip">
                        <span class="thumb">
                          <img src="../img/img-product-70px-galaxy-zflip@2x.png" alt="갤럭시 Z Flip" title="갤럭시 Z Flip"
                            aria-hidden="true">
                        </span>
                        <span class="service-cnt">
                          <span class="service-name">갤럭시 Z Flip</span>
                        </span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- close btn -->
    <button type="button" class="btn-close"><span class="ico-close">팝업 닫기</span></button>
  </div>

  <script>
    // chart js 
    var data = {
      // [D] 차트 labels 삭제 12/13
      // labels: [ '블랙', '그레이', '화이트', '레드' , '옐로', '블루'],
      datasets: [{
        data: [ 50, 21, 15, 8 , 5 , 1],
        backgroundColor: ['#222222','#d8d8d8','#ffffff','#ff5d5d','#ffde01','#3b4bff'],
      }],
    };

    var options = {
      cutout: 40,
      responsive: false,
      borderWidth:1,
      borderColor:'#e5e5e5',
      animation: {
        animateScale: true,
        animateRotate: true
      },
      plugins: {
        legend: {
          display: false
        },
        // [D] 차트 hover 시 툴팁 막아줌 12/13
        tooltip: {
          enabled: false // <-- this option disables tooltips
        }
      },
      // [D] 차트 hover 시 색상 변화 막아줌 12/13
      hover: {
        mode: null
      },
    };

    var config = {
      type: 'doughnut',
      data: data,
      options: options,
    };
    var ctx = document.getElementById("color-chart").getContext("2d");
    var chart = new Chart(ctx, config);  


    //---------------------------------------------------------------------
    // size bar 
    var _sizeBarList = $(".chart-bar-horizontal-single .bar-area > .bar");
    
    _sizeBarList.each(function() {
      //bar전체 넓이
      var _wrapWidth = $(".chart-bar-horizontal-single").width();
      // 134 = 최소 고정 넓이값 
      var _10per = (_wrapWidth - 134) * 0.1;
      var _50per = (_wrapWidth - 134) * 0.5;
      //bar 넓이
      var _barWidth = $(this).width();

      // ~ 10%
      if(_barWidth <= Math.round(_10per)){
        $(this).css({
          'background-color': '#6759e5',
        });

      //11% ~ 50%
      }else if((_barWidth > Math.round(_10per)) && (_barWidth <= Math.round(_50per))) {
        $(this).css({
          'background-color': '#5444e2',
        });

      //51% ~ 100%
      }else {
        $(this).css({
          'background-color': '#4130df',
        });
      };
    
    });
  
  </script>
</body>

</html>